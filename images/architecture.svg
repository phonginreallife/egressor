<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316"/>
      <stop offset="100%" style="stop-color:#ea580c"/>
    </linearGradient>
    <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="650" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="24" font-weight="bold">Egressor Architecture</text>
  
  <!-- Frontend Layer -->
  <g filter="url(#shadow)">
    <rect x="250" y="55" width="400" height="60" rx="8" fill="url(#greenGrad)"/>
    <text x="450" y="85" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="16" font-weight="600">Frontend</text>
    <text x="450" y="103" text-anchor="middle" fill="#d1fae5" font-family="system-ui, sans-serif" font-size="12">Next.js • TypeScript • Tailwind</text>
  </g>
  
  <!-- Arrow from Frontend to API -->
  <path d="M450 115 L450 145" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- API Layer -->
  <g filter="url(#shadow)">
    <rect x="150" y="150" width="280" height="80" rx="8" fill="url(#blueGrad)"/>
    <text x="290" y="185" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="16" font-weight="600">Go API Server</text>
    <text x="290" y="205" text-anchor="middle" fill="#dbeafe" font-family="system-ui, sans-serif" font-size="11">REST + gRPC • Chi Router</text>
    <text x="290" y="220" text-anchor="middle" fill="#93c5fd" font-family="system-ui, sans-serif" font-size="10">:8080</text>
  </g>
  
  <!-- Intelligence Service -->
  <g filter="url(#shadow)">
    <rect x="470" y="150" width="280" height="80" rx="8" fill="url(#purpleGrad)"/>
    <text x="610" y="185" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="16" font-weight="600">Intelligence Service</text>
    <text x="610" y="205" text-anchor="middle" fill="#ede9fe" font-family="system-ui, sans-serif" font-size="11">Python • FastAPI • Claude AI</text>
    <text x="610" y="220" text-anchor="middle" fill="#c4b5fd" font-family="system-ui, sans-serif" font-size="10">:8090</text>
  </g>
  
  <!-- Proxy arrow -->
  <path d="M430 190 L470 190" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="450" y="183" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">proxy</text>
  
  <!-- Arrow from API to Engines -->
  <path d="M290 230 L290 270" stroke="#64748b" stroke-width="2"/>
  
  <!-- Data Engines -->
  <g filter="url(#shadow)">
    <rect x="50" y="275" width="600" height="100" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <text x="350" y="300" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Go Data Processing Engines</text>
    
    <!-- Engine boxes -->
    <rect x="70" y="315" width="120" height="45" rx="4" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
    <text x="130" y="342" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="11" font-weight="500">Graph Engine</text>
    
    <rect x="210" y="315" width="120" height="45" rx="4" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
    <text x="270" y="342" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="11" font-weight="500">Cost Engine</text>
    
    <rect x="350" y="315" width="120" height="45" rx="4" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
    <text x="410" y="342" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="11" font-weight="500">Baseline Engine</text>
    
    <rect x="490" y="315" width="140" height="45" rx="4" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
    <text x="560" y="342" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="11" font-weight="500">Anomaly Detection</text>
  </g>
  
  <!-- Collector -->
  <g filter="url(#shadow)">
    <rect x="680" y="275" width="170" height="100" rx="8" fill="url(#cyanGrad)"/>
    <text x="765" y="315" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Collector</text>
    <text x="765" y="335" text-anchor="middle" fill="#cffafe" font-family="system-ui, sans-serif" font-size="11">Go • gRPC</text>
    <text x="765" y="355" text-anchor="middle" fill="#a5f3fc" font-family="system-ui, sans-serif" font-size="10">OTel Protocol</text>
    <text x="765" y="368" text-anchor="middle" fill="#67e8f9" font-family="system-ui, sans-serif" font-size="9">:4317</text>
  </g>
  
  <!-- Arrow from Engines to Storage -->
  <path d="M350 375 L350 415" stroke="#64748b" stroke-width="2"/>
  <path d="M765 375 L765 400 L500 400 L500 415" stroke="#64748b" stroke-width="2"/>
  
  <!-- Storage Layer -->
  <g filter="url(#shadow)">
    <rect x="150" y="420" width="200" height="70" rx="8" fill="#dc2626"/>
    <text x="250" y="452" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">ClickHouse</text>
    <text x="250" y="472" text-anchor="middle" fill="#fecaca" font-family="system-ui, sans-serif" font-size="11">Analytics • Time Series</text>
  </g>
  
  <g filter="url(#shadow)">
    <rect x="400" y="420" width="200" height="70" rx="8" fill="#2563eb"/>
    <text x="500" y="452" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">PostgreSQL</text>
    <text x="500" y="472" text-anchor="middle" fill="#bfdbfe" font-family="system-ui, sans-serif" font-size="11">Metadata • Config</text>
  </g>
  
  <g filter="url(#shadow)">
    <rect x="650" y="420" width="150" height="70" rx="8" fill="#dc2626" fill-opacity="0.7"/>
    <text x="725" y="452" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Redis</text>
    <text x="725" y="472" text-anchor="middle" fill="#fecaca" font-family="system-ui, sans-serif" font-size="11">Cache • Pub/Sub</text>
  </g>
  
  <!-- Arrow from Collector to Agents -->
  <path d="M765 490 L765 530" stroke="#64748b" stroke-width="2"/>
  <text x="780" y="515" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">gRPC</text>
  
  <!-- Agent Layer -->
  <g filter="url(#shadow)">
    <rect x="100" y="535" width="700" height="90" rx="8" fill="url(#orangeGrad)"/>
    <text x="450" y="565" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="16" font-weight="600">Agents (eBPF)</text>
    <text x="450" y="585" text-anchor="middle" fill="#fed7aa" font-family="system-ui, sans-serif" font-size="12">Go + eBPF/C • DaemonSet per Node</text>
    <text x="450" y="605" text-anchor="middle" fill="#fdba74" font-family="system-ui, sans-serif" font-size="11">Kernel-level Traffic Capture • K8s Metadata Enrichment</text>
  </g>
  
  <!-- Kubernetes icons/label -->
  <g>
    <rect x="30" y="555" width="50" height="50" rx="6" fill="#326ce5"/>
    <text x="55" y="585" text-anchor="middle" fill="#fff" font-family="system-ui, sans-serif" font-size="10" font-weight="bold">K8s</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(720, 530)">
    <text x="0" y="0" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10" font-weight="600">TECH STACK</text>
    <circle cx="8" cy="15" r="4" fill="#10b981"/>
    <text x="18" y="18" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Next.js</text>
    <circle cx="8" cy="30" r="4" fill="#3b82f6"/>
    <text x="18" y="33" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Go</text>
    <circle cx="8" cy="45" r="4" fill="#8b5cf6"/>
    <text x="18" y="48" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Python</text>
    <circle cx="8" cy="60" r="4" fill="#f97316"/>
    <text x="18" y="63" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">eBPF/C</text>
  </g>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
</svg>
